# In the parameters section one can define global variables. When submitting the jobs epipe will replace them in the commands (see below)
- parameters:
    - scripts_dir: src/train_pybird_emulators/scripts
    - executable1: generate_training_data.py
    - n_jobs: 150
    - num_samps_per_index: 800
    - n_gridpoints: 140000 #Should be the product of the previous two numbers 4X larger if clipping

# - name: generate_training_data_growth
#   cmd: esub $[scripts_dir]/$[executable1] --tasks='0>200' --n_jobs=$[n_jobs] --mode=jobarray --function='main,merge' --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_growth.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_growth --merge_memory=8192 --watchdog_time=24 --td_type=growth --verbosity=debug

# - name: generate_training_data_greenfunction_and_growth
#   cmd: esub $[scripts_dir]/$[executable1] --tasks='0>100' --n_jobs=$[n_jobs] --mode=jobarray --function='main,merge' --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_growth_and_greens.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_growth_and_green2 --merge_memory=8192 --watchdog_time=24 --td_type=growth_and_green --verbosity=debug

# - name: generate_training_data_bpk_full
#   cmd: esub $[scripts_dir]/$[executable1] --tasks='0>100' --n_jobs=$[n_jobs] --mode=jobarray --function='main,merge' --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_bpk_full.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_bpk_full_narrow --merge_memory=8192 --watchdog_time=24 --td_type=full_bpk --verbosity=debug

# - name: generate_training_data_greenfunction
#   cmd: esub $[scripts_dir]/$[executable1] --tasks='0>100' --n_jobs=$[n_jobs] --mode=jobarray --function='main,merge' --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_green_functions.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_green_function --merge_memory=8192 --watchdog_time=24 --td_type=greenfunction --verbosity=debug

# - name: generate_training_data_pybird_emu
#   cmd: esub $[scripts_dir]/$[executable1] --tasks='0>3000' --n_jobs=$[n_jobs] --mode=jobarray --function='merge' --main_n_cores_per_job=8 --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_pybird_80_knots_10sigma.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_pybird_covfactor_newbank --merge_memory=8192 --watchdog_time=24 --verbosity=debug --td_type=pybird_pieces --cov_file=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/data/knots_data/covariance_80_knots_new.npy --mu_file=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/data/knots_data/mu_80_knots_new.npy --filename_knots=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/data/knots_data/final_knots_80.npy --cov_factor=3 --clip_distributions --ind_offset=1500 #--merge_n_cores=8

# - name: generate_training_data_pybird_emu_nf
#   cmd: esub $[scripts_dir]/$[executable1] --tasks='0>10' --n_jobs=$[n_jobs] --mode=jobarray --function='merge' --main_n_cores_per_job=8 --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_pybird_80_knots_10sigma.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_pybird_nf3 --merge_memory=8192 --watchdog_time=24 --verbosity=debug --td_type=pybird_pieces --nf_model_file=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/data/nf_models/nf_model --nf_factor=1 --filename_knots=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/data/knots_data/final_knots_80.npy

# - name: generate_training_data_pybird_emu_gc
#   cmd: esub $[scripts_dir]/$[executable1] --tasks='0>3000' --n_jobs=$[n_jobs] --mode=jobarray --function='merge' --main_n_cores_per_job=8 --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_pybird_80_knots_10sigma.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_pybird_gc --merge_memory=16192 --verbosity=debug --td_type=pybird_pieces --gc_dir=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/notebooks --gc_factor=1 --filename_knots=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/data/knots_data/final_knots_80.npy

# - name: generate_training_data_pybird_emu_input
#   cmd: esub $[scripts_dir]/$[executable1] --tasks='0>2800' --n_jobs=$[n_jobs] --mode=jobarray --function='main,merge' --main_n_cores_per_job=8 --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_pybird_80_knots_10sigma.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_pybird_emu_input_final --merge_memory=16192 --verbosity=debug --td_type=pybird_pieces --emu_inputs_file=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/notebooks/merged_output2.h5 --filename_knots=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/data/knots_data/final_knots_80.npy

- name: generate_training_data_pybird_emu_input_finetune
  cmd: esub $[scripts_dir]/$[executable1] --tasks='0>150' --n_jobs=$[n_jobs] --mode=jobarray --function='main,merge' --main_n_cores_per_job=8 --main_time=4 --main_memory=4096 --system=slurm --num_samps_per_index=$[num_samps_per_index] --n_gridpoints=$[n_gridpoints] --filename_config='/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/configs/config_pybird_80_knots_10sigma.yaml' --scratch=/cluster/scratch/areeves/pybird_training_data_pybird_emu_input_finetune --merge_memory=16192 --verbosity=debug --td_type=pybird_pieces --emu_inputs_file=/cluster/scratch/areeves/pk_bank_boss_gaussian_cov_validation/total_data.h5 --filename_knots=/cluster/work/refregier/alexree/local_packages/train_pybird_emulators/src/train_pybird_emulators/data/knots_data/final_knots_80.npy